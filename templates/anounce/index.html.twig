{% extends 'base.html.twig' %}

{% block title %}Controller index
{% endblock %}


{% block body %}
	{#<a href="{{path('app_announce_index')}}">Annoce</a>#}

	<div class="container mt-5">
		{# Container debut #}
		{# Jumbotron #}
			<div class="jumbotron"> <h1 class="display-3">Hello, world!</h1>
			<p class="lead">This is a simple hero unit, a simple jumbotron-style component for calling extra attention to featured content or information.</p>
			<hr class="my-4">
			<p>It uses utility classes for typography and spacing to space content out within the larger container.</p>
			<p class="lead">
				<a class="btn btn-primary btn-lg" href="{{path('app_announce_create')}}" role="button">Annonces</a>
				{#<a class="btn btn-primary btn-lg" href="{{path('app_announce_create')}}" role="button">Annonce</a>#}
				<a class="btn btn-primary btn-lg" href="{{path('app_announce_admin')}}" role="button">Admin_Page</a>

			</p>
{% for flashError in app.flashes('success') %}
        <div class="success" role="alert">{{ flashError }}</div>
    {% endfor %}


		</div>
		<div class="container my-5">
			<H1>
				<ta-center>Announce</ta-center>
			</H1><br/><br/>

			<div class="row ">
				{% for announce in announces %}
					<div class="col-md-4">
						<div class="card mb-3">
							<h5 class="card-header">
								<p class="card-header text-center"></p>
								{% if announce.rooms < 2 %}Une chambre
								{% else %}
									{{announce.rooms}}
									Chambres
								{% endif %}
								à
								{{announce.price | number_format(0, ',', ' ')}}
								/mois
								<br/>
								<small>{{announce.comments |length }}
									commentaires</small>
							</p>

							<img src="{{asset('uploads/coverImages/' ~ announce.coverImage )}}" alt="image" style="height:300; width:100%;">


							<div class="card-body">


								<h5>{{announce.title}}</h5>
								<strong>

									<p class="card-text">{{announce.introduction |u.truncate(100, '...')}}</p>
								</strong>
							</p>

						</div>

						<p class="card-text">{{announce.description}}</p>

						<td>
							<a href="{{ path('app_announce_show', {slug: announce.slug}) }}">
                            <strong class="bi bi-pencil-square">Details</strong></a><br>
						
							<a href="{{ path('app_announce_edit', {slug: announce.slug}) }}">
                            <strong class="bi bi-pencil-square">Edite</strong></a><br>

						<a href="{{ path('app_announce_delete', {slug: announce.slug}) }}" 
                            onclick="return confirm('Êtes-vous sûr de vouloir supprimer cette annonce ?')" >
                            <strong class="bi bi-trash-fill">delete</strong></a>
						

						<div class="card-footer text-muted text-center">
							<i class="fas fa-map-marker">
								{{announce.address}}
							</i>
							<br>
							<small>{{announce.createdAt |ago(locale='fr')}}</small>
							{#<small>{{ announce.createdAt | date("d-m-y") }}</small>#}


						</div>

					</div>
				</div>
			{% endfor %}
		</div>
	</div>
{% endblock %}
